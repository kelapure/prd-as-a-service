{
  "prd_text": "# PRD: Patient Alert Prioritization System\n\n## Executive Summary\n\nMedical practices face significant inefficiency in managing patient communications. Current alert systems treat all notifications equally, resulting in 30% drop-off in critical interventions and staff burnout from triaging hundreds of undifferentiated alerts daily.\n\nThis PRD proposes an AI-powered Alert Prioritization System that scores, routes, and tracks patient notifications to ensure high-risk cases receive immediate attention while reducing alert fatigue for care teams.\n\n## Business Problem\n\n- **Volume overload**: Each practice receives 200-500 alerts/day across email, Veeva, and manual reports\n- **No differentiation**: Critical alerts (e.g., adverse events) sit alongside routine notifications\n- **Missed interventions**: 30% of high-priority alerts are addressed >24h after receipt\n- **Staff burnout**: Care coordinators spend 4h/day manually triaging alerts\n- **Compliance risk**: Audit trails are manual and incomplete\n\n**Quantified Impact**: Reducing intervention time from 24h to 4h for priority alerts can prevent 15-20% of adverse outcomes based on historical retrospective analysis.\n\n## Current Process\n\n1. Alerts arrive via: Veeva notifications, email forwards, LIMS extracts, manual phone logs\n2. Practice hub staff manually review each alert\n3. Hub staff forward to PAM/FAM based on subjective assessment\n4. PAM/FAM manually log in tracker spreadsheet\n5. Follow-up actions tracked via email and phone calls\n\n**Pain Points**:\n- No central repository\n- Inconsistent scoring criteria\n- No automated routing\n- Limited audit trail\n- Delayed escalation for urgent cases\n\n## Proposed Solution\n\nBuild an Alert Prioritization System that:\n\n1. **Ingests** alerts from multiple sources (Veeva webhook, email parsing, LIMS API, manual entry)\n2. **Scores** each alert using deterministic rules and ML risk model (0-100 scale)\n3. **Routes** alerts to appropriate role (PAM/FAM/HUB/KAM) based on score + business rules\n4. **Tracks** all actions with ALCOA+ compliant audit trail\n5. **Escalates** high-priority alerts via SMS/Slack if not acknowledged within SLA\n\n## Technical Requirements\n\n### F1: Multi-Source Alert Ingestion\n\n**Veeva Integration**:\n- Webhook endpoint: POST /api/alerts/veeva\n- Authentication: OAuth 2.0 Client Credentials + IP allowlist\n- Payload validation: alert_id (UUID), patient_id (UUID), event_type (enum), event_timestamp (ISO-8601)\n- Deduplication: SHA-256 hash of (patient_id + event_type + event_timestamp)\n- Error handling: 4xx return structured error code, 5xx write to DLQ and alarm if >0.5% of volume in 5min window\n\n**Email Parsing**:\n- Inbound email to alerts@practicemail.com\n- Parse sender, subject, body; extract patient_id via regex\n- Store original email in S3 (encrypted at rest, KMS)\n- Create alert record with source=\"email\"\n\n**LIMS API Pull**:\n- Cron job every 15min\n- GET /lims/alerts with pagination\n- Transform to internal schema\n- Mark processed alerts in LIMS\n\n### F2: Alert Scoring & Prioritization\n\n**Scoring Model**:\n- Deterministic rules-based score (60% weight): days_stuck, stage criticality, event type\n- ML risk score (40% weight): logistic regression on historical interventions\n- Combined score (0-100)\n\n**Priority Thresholds**:\n- P0 (score ≥80): Immediate escalation\n- P1 (50-79): Route within 2h\n- P2 (<50): Next business day\n\n**Routing Logic**:\n- If P0 and patient in oncology trial → FAM\n- If P1 and patient in commercial program → PAM\n- If P2 → Hub coordinator\n\n### F3: RBAC & Audit Trail\n\n**Roles**:\n- Hub: view all alerts, assign, comment\n- PAM/FAM: view assigned alerts, update status, add notes\n- KAM: read-only view for escalations\n- Admin: configure rules, export audit logs\n\n**Audit Requirements**:\n- ALCOA+ compliant: Attributable, Legible, Contemporaneous, Original, Accurate, Complete, Consistent, Enduring, Available\n- Log all CRUD operations: user_id, timestamp, action, before/after state\n- Immutable log (append-only table with hash chain)\n- 7-year retention\n- Encrypted at rest (KMS) and in transit (TLS 1.2+)\n\n### F4: SLA Monitoring & Escalation\n\n**SLAs**:\n- P0: acknowledge within 30min, resolve within 4h\n- P1: acknowledge within 2h, resolve within 24h\n- P2: acknowledge within 24h\n\n**Escalation**:\n- If P0 not acknowledged in 30min → SMS to on-call PAM + Slack #alerts-critical\n- If P1 not acknowledged in 2h → Email to team lead\n- Dashboard shows SLA compliance by user, week, alert type\n\n## Success Metrics\n\n| Metric | Baseline | Target | Measurement |\n|--------|----------|--------|-------------|\n| Mean time to P0 intervention | 24h | <4h | Timestamp deltas in DB |\n| Alerts correctly routed (precision) | N/A | ≥95% | Weekly spot-check by supervisor |\n| Staff time on triage | 4h/day | <1h/day | Time-tracking logs |\n| Audit trail completeness | 40% | 100% | Quarterly compliance review |\n\n## Scope Boundaries\n\n**In Scope**:\n- Alert ingestion from Veeva, email, LIMS\n- Scoring and routing\n- Web UI for alert management\n- Audit trail and SLA monitoring\n\n**Out of Scope** (separate PRDs):\n- Patient communication outreach (handled by existing CRM)\n- Predictive analytics dashboard (roadmap Q4)\n- Integration with external EMR systems (deferred pending vendor selection)\n\n## Dependencies\n\n- Veeva API access (requires legal review + BAA)\n- LIMS vendor API documentation (in progress)\n- KMS key provisioning (Ops team, 2-week lead time)\n\n## Open Questions\n\n- Should we support manual phone call logging in V1 or defer to V2?\n- What is the escalation path if SMS fails (backup phone? email?)?\n- Do we need a separate \"urgent but non-clinical\" priority level?\n"
}
